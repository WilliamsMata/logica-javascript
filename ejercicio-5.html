<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ejercicio 5</title>
  </head>
  <body>
    <h1>Ejercicio 5</h1>
    <ol>
      <li>
        Programa una función para convertir números de base binaria a decimal y
        viceversa, pe. miFuncion(100, 2) devolverá 4 base 10.
      </li>
      <li>
        Programa una función que devuelva el monto final despues de aplciar un
        descuento a una cantidad dada, pe. miFuncion(1000, 20) devolverá 800.
      </li>
      <li>
        Programa una función que dada una fecha válida determine cuantos años
        han pasado hasta el día de hoy, pe. miFuncion(new Date(1984,4,23))
        devolverá 35 años (en 2020).
      </li>
    </ol>
    <script>
      //Funcion para convertir números de base binaria a decimal y viceversa.
      const convertir = (numero = undefined, base = undefined) => {
        if (numero === undefined)
          return console.warn("Introduzca un numero y su base");

        if (typeof numero !== "number")
          return console.error("Debe introducir un numero");

        if (base === undefined)
          return console.warn("Introduzca la base del número");

        if (typeof base !== "number")
          return console.error("La base debe ser colocada en numeros");

        if (base === 10)
          return console.log(
            `(${numero})10 es igual a (${numero.toString(2)})2`
          );

        console.log(
          `(${numero})${base} es igual a (${parseInt(numero, base)})10`
        );
      };

      convertir(4, 10);
      convertir(100, 2);

      //Funcion que devuelva el monto final despues de aplicar un descuento a una cantidad data
      const descuento = (numero = undefined, porcentaje = 0) => {
        if (numero === undefined)
          return console.warn(
            "Introduzca un numero y el porcentaje de descuento"
          );

        if (typeof numero != "number")
          return console.error("Los datos introducidos no son numeros");

        if (numero === 0) return console.error(`El numero no puede ser 0`);

        if (Math.sign(numero) === -1)
          return console.error("El numero no puede ser negativo");

        if (typeof porcentaje != "number")
          return console.error("El porcentaje no es un numero");

        if (Math.sign(porcentaje) === -1)
          return console.error(`El descuento no puede ser negativo`);

        return console.log(
          `Precio base= ${numero}, Descuento= ${porcentaje}%, Precio Final= ${
            numero - (numero * porcentaje) / 100
          }`
        );
      };

      descuento(1000, 20);

      //Funcion que dada una fecha válida determine cuantos años han pasado hasta el día de hoy

      const howOld = (anio = undefined, mes = 1, fecha = 1) => {
        if (anio === undefined)
          return console.warn(
            `Introduzca desde que fecha quieres calcular hasta la actualidad (año, mes, fecha)`
          );

        if (
          typeof anio != "number" ||
          typeof mes != "number" ||
          typeof fecha != "number"
        )
          return console.error(`Los datos que introdujo no son numeros.`);

        if (mes <= 0 || fecha <= 0)
          return console.error(
            `El mes y/o la fecha no pueden ser cero o negativos`
          );

        if (fecha > 31)
          return console.error(`La fecha no puede ser mayor a 31`);

        if (mes > 12) return console.error(`El mes no puede ser mayor a 12`);

        let fechaDesde = new Date(anio, mes - 1, fecha);
        let fechaActual = new Date();

        if (fechaDesde >= fechaActual)
          return console.error("La fecha no puede ser mayor al dia actual");

        let msEnDias = 1000 * 60 * 60 * 24;
        let msEnMes = msEnDias * 30.4166666668;
        let msEnAnios = msEnMes * 12;

        let tiempoPasadoAnio = (fechaActual - fechaDesde) / msEnAnios;
        let tiempoPasadoMes = Math.floor(
          (fechaActual -
            new Date(fechaActual.getFullYear() - 1, mes - 1, fecha)) /
            msEnMes
        );

        if (tiempoPasadoMes === 1 || tiempoPasadoMes - 12 === 1)
          return console.log(
            `Desde ${fechaDesde.toDateString()} han pasado ${Math.floor(
              tiempoPasadoAnio
            )} años y un mes.`
          );

        if (tiempoPasadoMes === 0 || tiempoPasadoMes - 12 === 0)
          return console.log(
            `Desde ${fechaDesde.toDateString()} han pasado ${Math.floor(
              tiempoPasadoAnio
            )} años.`
          );

        if (tiempoPasadoMes > 12)
          return console.log(
            `Desde ${fechaDesde.toDateString()} han pasado ${Math.floor(
              tiempoPasadoAnio
            )} años y ${tiempoPasadoMes - 12} meses.`
          );

        return console.log(
          `Desde ${fechaDesde.toDateString()} han pasado ${Math.floor(
            tiempoPasadoAnio
          )} años y ${tiempoPasadoMes} meses.`
        );
      };

      howOld(1984, 4, 23);
    </script>
  </body>
</html>
